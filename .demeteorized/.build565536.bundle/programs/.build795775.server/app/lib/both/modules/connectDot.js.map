{"version":3,"sources":["meteor://ðŸ’»app/lib/both/modules/connectDot.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAUA,IAAI,uBAAuB,GAAG,UAAC,KAAK,EAAE,WAAW,EAAI;AACnD,MAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC9B,MAAG,GAAG,EAAC;AACL,QAAI,MAAM,GAAG,GAAG,CAAC,WAAW,CAAC;AAC7B,UAAM,CAAC,IAAI,CAAC,wBAAwB,EAAE,MAAM,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,UAAS,KAAK,EAAE,MAAM,EAAC;AACxG,UAAI,KAAK,EAAC;AACR,eAAO,CAAC,GAAG,CAAC,iCAAiC,GAAG,KAAK,CAAE,CAAC;OACzD;KACF,CAAC,CAAC;GACJ;CACF,CAAC;AACF,IAAI,UAAU,GAAG,UAAC,QAAQ,EAAK;;AAE7B,QAAM,CAAC,IAAI,CAAC,4BAA4B,EAAE,QAAQ,EAAE,UAAS,KAAK,EAAE,MAAM,EAAC;AACvE,QAAI,CAAC,KAAK,EAAC;AACT,UAAI,QAAQ,CAAC,UAAU,CAAC,UAAU,KAAK,cAAc,EAAC;AACpD,cAAM,CAAC,IAAI,CAAC,gBAAgB,EAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,UAAU,CAAC,aAAa,EAAC,UAAU,KAAK,EAAC,MAAM,EAAC;AACtG,cAAG,KAAK,EAAC;AACP,mBAAO,CAAC,GAAG,CAAC,oCAAoC,GAAG,KAAK,CAAC,CAAC;WAC3D;SACF,CAAC,CAAC;OACJ;AACD,aAAO,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;AACvC,6BAAuB,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;AAC7E,UAAI,CAAC,KAAK,CAAE,cAAc,EAAE,SAAS,EAAE,mBAAmB,CAAE,CAAC;KAC9D,MACE;AACD,aAAO,CAAC,GAAG,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC;KAC9B;GACH,CAAC,CAAC;CACL,CAAC;AACF,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC,kC","file":"/lib/both/modules/connectDot.js","sourcesContent":["/*\n  This module responsible to connect dot, he does all the needed actions, can be used\n  at connect action and create action.\n */\n\n\n/*\n * This function receive smartRef of a needed to be connected dot, and does all the logic\n * in order to makes the connections.\n */\nlet _updateUserConnectivity = (dotId, parentDotId) =>{\n  let dot = Dotz.findOne(dotId);\n  if(dot){\n    let userId = dot.ownerUserId;\n    Meteor.call('updateUserConnectivity', Meteor.userId(), dotId, userId, parentDotId ,function(error, result){\n      if (error){\n        console.log(\"Update user connectivity ERROR \" + error );\n      }\n    });\n  }\n};\nlet connectDot = (smartRef) => {\n\n  Meteor.call('addDotToConnectedDotzArray', smartRef, function(error, result){\n      if (!error){\n        if (smartRef.connection.actionName === CONNECT_ACTION){\n          Meteor.call('addDotToInDotz',smartRef.dot._id, smartRef.connection.toParentDotId,function (error,result){\n            if(error){\n              console.log(\"Error at inDotz update at connect \" + error);\n            }\n          });\n        }\n        Modules.both.Dotz.updateFeed(smartRef);\n        _updateUserConnectivity(smartRef.dot._id, smartRef.connection.toParentDotId);\n        Bert.alert( 'Connected :)', 'success', 'growl-bottom-left' );\n      }\n     else{\n        console.log(\"Error\" + error);\n      }\n   });\n};\nModules.both.Dotz.connectDot = connectDot;\n"]}