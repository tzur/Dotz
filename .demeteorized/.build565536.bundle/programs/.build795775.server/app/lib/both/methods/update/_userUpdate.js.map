{"version":3,"sources":["meteor://ðŸ’»app/lib/both/methods/update/_userUpdate.js"],"names":[],"mappings":"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","file":"/lib/both/methods/update/_userUpdate.js","sourcesContent":["let _userUpdate = (userId, updateOptions) => {\n    try {\n      check(updateOptions, Object);\n      check(userId, String);\n      Meteor.users.update({_id: userId}, updateOptions);\n    } catch (exception) {\n      return exception;\n    }\n  };\n\nMeteor.methods({\n\n  //TBD: special method for user-signUp process:\n  updateUserProfileDotId(userId, dotId){\n    check(userId, String);\n    check(dotId, String);\n    Meteor.users.update( {_id: userId}, {$set: {\"profile.profileDotId\": dotId}} );\n  },\n\n  //TBD: special method for user-signUp process:\n  // Does not work with try/exception..\n  updateUserSlug(userId, slug){\n    check(userId, String);\n    check(slug, String);\n    Meteor.users.update( {_id: userId}, {$set: {\"profile.userSlug\": slug}} );\n  },\n\n  editUserAccount(doc){\n    check(doc, Schema.editUserAccount);\n    let changedFields = doc.$set;\n\n    let changeFieldsAndValues = doc.$set;\n    let updateOptions = {\n      $set: changeFieldsAndValues\n    };\n    _userUpdate(Meteor.userId(), updateOptions);\n    return doc._id;\n  },\n\n  updateCreatedByUserDotz(userId, dotId){\n    check(userId, String);\n    check(dotId, String);\n    let updateOptions = {\n      $addToSet: {\"profile.createdByUserDotz\": dotId}\n    };\n    _userUpdate(userId, updateOptions);\n  },\n  updateCreatedByUserLists(userId, dotId){\n    check(userId, String);\n    check(dotId, String);\n    let updateOptions = {\n      $addToSet: {\"profile.createdByUserLists\": dotId}\n    };\n    _userUpdate(userId, updateOptions);\n  },\n\n  followUser(followingUserId, followedUserId){\n    check(followingUserId, Meteor.userId());\n    check(followingUserId, String);\n    check(followedUserId, String);\n    let updateOptions = {\n      $addToSet: {\"profile.following\": followedUserId}\n    };\n    _userUpdate(followingUserId, updateOptions);\n  },\n\n  updateFollowedWithFollow(followingUserId, followedUserId){\n    check(followingUserId, Meteor.userId());\n    check(followedUserId, String);\n    let updateOptions = {\n      $addToSet: {\"profile.followers\": followingUserId}\n    };\n    _userUpdate(followedUserId, updateOptions)\n  },\n\n  unFollowUser(followingUserId, followedUserId){\n    check(followingUserId, Meteor.userId());\n    check(followedUserId, String);\n    let updateOptions = {\n      $pull: {\"profile.following\": followedUserId}\n    };\n    _userUpdate(followingUserId ,updateOptions);\n  },\n\n  updateFollowedWithUnFollow(followingUserId, followedUserId){\n    check(followingUserId, Meteor.userId());\n    check(followedUserId, String);\n    let updateOptions = {\n      $pull: {\"profile.followers\": followingUserId}\n    };\n    _userUpdate(followedUserId, updateOptions);\n  },\n\n  updateUserConnectivity(connectedUserId, dotId, belongsToUserId, parentDotId){\n    check(connectedUserId, String);\n    check(dotId, String);\n    check(belongsToUserId, String);\n    check(parentDotId, String);\n    let connectivityItem = {\n      userId: connectedUserId,\n      dotId: dotId,\n      parentDotId: parentDotId\n    };\n    let updateOptions = {\n      $addToSet: {\"profile.userConnections\" : connectivityItem}\n    };\n    console.log(\"UPDATINGGGG \" + belongsToUserId);\n    _userUpdate(belongsToUserId, updateOptions);\n  },\n\n  editUserCoverImage(coverImageUrl){\n    //change to URL in check\n    check(coverImageUrl, String);\n    let updateOptions = {\n      $set: {\"profile.coverImage\": coverImageUrl}\n    };\n    _userUpdate(Meteor.userId(), updateOptions)\n  },\n\n  editUserProfileImage(profileImageUrl){\n    //change to URL in check\n    check(profileImageUrl, String);\n    let updateOptions = {\n      $set: {\"profile.profileImage\": profileImageUrl}\n    };\n    _userUpdate(Meteor.userId(), updateOptions)\n  },\n\n  editUserLocation(locationObject){\n    //change to URL in check\n    check(locationObject, Object);\n\n    let locationSchemaObject = {};\n    locationSchemaObject = {\n      latLng: locationObject.locationLatLng,\n      name: locationObject.general.name,\n      address: locationObject.general.formatted_address,\n      googleMapsUrl: locationObject.general.url,\n      placeId: locationObject.general.place_id,\n      placePhoneNumber: locationObject.general.formatted_phone_number\n    };\n    check(locationSchemaObject, Schema.location);\n\n    let updateOptions = {\n      $set: { \"profile.location\": locationSchemaObject}\n    };\n    _userUpdate(Meteor.userId(), updateOptions)\n  }\n\n\n\n});\n\n\n"]}