{"version":3,"sources":["meteor://ðŸ’»app/lib/both/modules/closeToOpen.js"],"names":[],"mappings":";;;;;;;;;AACA,MAAM,CAAC,OAAO,CAAC;AACb,aAAW,YAAC,GAAG,EAAC;AACd,SAAK,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;AACnB,QAAI,MAAM,CAAC,MAAM,EAAE,IAAI,GAAG,CAAC,WAAW,EAAC;AACrC,aAAO,KAAK,CAAC;KACd;AACD,QAAI,GAAG,CAAC,MAAM,EAAC;AACb,YAAM,IAAI,MAAM,CAAC,KAAK,CAAC,eAAe,EAAE,2CAA2C,CAAC,CAAC;KACtF;AACD,QAAI,GAAG,CAAC,kBAAkB,EAAC;AACzB,SAAG,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAS,SAAS,EAAE,SAAS,EAAC;AACxD,eAAQ,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC;OAC/E,CAAC,CAAC;KACJ;AACD,QAAG;AACD,UAAI,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,EAAC,EAAE;AAC3B,YAAI,EAAE,EAAC,kBAAkB,EAAE,GAAG,CAAC,kBAAkB,EAAE,MAAM,EAAE,IAAI,EAAC;OACjE,CAAC,CAAC;KACJ,CACD,OAAM,KAAK,EAAC;AACV,YAAM,KAAK,CAAC;KACb;GAEF;AACD,aAAW,YAAC,GAAG,EAAC;AACd,SAAK,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;AACnB,QAAI,MAAM,CAAC,MAAM,EAAE,IAAI,GAAG,CAAC,WAAW,EAAC;AACrC,aAAO,KAAK,CAAC;KACd;AACD,QAAI,CAAC,GAAG,CAAC,MAAM,EAAC;AACd,YAAM,IAAI,MAAM,CAAC,KAAK,CAAC,eAAe,EAAE,4CAA4C,CAAC,CAAC;KACvF;AACD,QAAG;AACD,UAAI,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,EAAC,EAAE;AAC3B,YAAI,EAAE,EAAC,MAAM,EAAE,KAAK,EAAC;OACtB,CAAC,CAAC;KACJ,CACD,OAAM,KAAK,EAAC;AACV,YAAM,KAAK,CAAC;KACb;GAEF;;CAGF,CAAC,CAAC,sE","file":"/lib/both/modules/closeToOpen.js","sourcesContent":["\nMeteor.methods({\n  closeToOpen(dot){\n    check(dot, Object);\n    if (Meteor.userId() != dot.ownerUserId){\n      return false;\n    }\n    if (dot.isOpen){\n      throw new Meteor.Error(\"close-to-open\", \"trying to send an open to be re-opened...\");\n    }\n    if (dot.connectedDotzArray){\n      dot.connectedDotzArray.sort(function(smartRefA, smartRefB){\n        return  smartRefB.connection.likes.length - smartRefA.connection.likes.length;\n      });\n    }\n    try{\n      Dotz.update({ _id: dot._id}, {\n        $set: {connectedDotzArray: dot.connectedDotzArray, isOpen: true}\n      });\n    }\n    catch(error){\n      throw error;\n    }\n\n  },\n  openToClose(dot){\n    check(dot, Object);\n    if (Meteor.userId() != dot.ownerUserId){\n      return false;\n    }\n    if (!dot.isOpen){\n      throw new Meteor.Error(\"open-to-close\", \"trying to send an close to be re-closed...\");\n    }\n    try{\n      Dotz.update({ _id: dot._id}, {\n        $set: {isOpen: false}\n      });\n    }\n    catch(error){\n      throw error;\n    }\n\n  }\n\n\n});\n\n"]}