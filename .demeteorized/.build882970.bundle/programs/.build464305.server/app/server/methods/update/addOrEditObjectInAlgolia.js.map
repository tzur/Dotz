{"version":3,"sources":["meteor://ðŸ’»app/server/methods/update/addOrEditObjectInAlgolia.js"],"names":[],"mappings":"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","file":"/server/methods/update/addOrEditObjectInAlgolia.js","sourcesContent":["/**\n * Created by avivhatzir on 17/11/2015.\n */\nMeteor.methods({\n  addOrEditObjectInAlgolia(docSlug, isUser){\n    check(docSlug, String);\n    check(isUser, Boolean);\n    if(process.env.NODE_ENV === \"production\"){\n      console.log(\"im in\" + process.env.NODE_ENV);\n\n      let array;\n      let docIndex;\n      check(docSlug, String);\n      check(isUser, Boolean);\n      var client = AlgoliaSearch(\"OE5LQTXY83\", \"bd14aab9d22ce75c25d286f9821b89c3\");\n\n      if (isUser){\n        let currentDoc = Meteor.users.findOne({\"profile.userSlug\": docSlug});\n        currentDoc.objectID = currentDoc._id;\n\n        array = [{\"objectID\": currentDoc.objectID,\"username\": currentDoc.username, \"profile\": currentDoc.profile, \"_id\": currentDoc._id}]\n        docIndex = \"Users\"\n\n      }\n      else{\n\n        let currentDoc = Dotz.findOne({dotSlug: docSlug});\n        currentDoc.objectID = currentDoc._id;\n        if(currentDoc.dotType === \"Dot\"){\n          docIndex = \"Dotz\"\n        }\n        else{\n          docIndex = \"Lists\"\n        }\n        currentDoc.inDotz = currentDoc.inDotz.length + currentDoc.totalUpvotes.length;\n        if(currentDoc.location && currentDoc.location.latLng){\n          currentDoc._geoloc = {\"lat\":currentDoc.location.latLng[0], \"lng\":currentDoc.location.latLng[1]};\n        }\n        array = [currentDoc];\n      }\n\n\n\n      var index = client.initIndex(docIndex);\n\n// array contains the data you want to save in the index\n\n      index.saveObjects(array, function (error, content) {\n        if (error) console.error('Error:', error);\n        else console.log('Content:', content);\n      });\n    }\n    else{\n      console.log(\"im here\" + process.env.NODE_ENV);\n      return false\n    }\n\n  },\n\n  deleteDotzFromAlgolia(dotId, dotType){\n    check(dotId, String);\n    check(dotType, String);\n    var client = AlgoliaSearch(\"OE5LQTXY83\", \"bd14aab9d22ce75c25d286f9821b89c3\");\n    let objectIndex;\n    let dot;\n    let index;\n\n    if(dotType === \"Dot\"){\n      index = client.initIndex(\"Dotz\");\n    }\n    else{\n      index = client.initIndex(\"Lists\");\n    }\n\n\n// array contains the data you want to save in the index\n\n    index.deleteObject(dotId, function (error, content) {\n      if (error) console.error('Error:', error);\n      else console.log('Content:', content);\n    });\n  }\n});\n"]}