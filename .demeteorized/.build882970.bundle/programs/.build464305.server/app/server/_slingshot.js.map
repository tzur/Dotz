{"version":3,"sources":["meteor://ðŸ’»app/server/_slingshot.js"],"names":[],"mappings":";;;;;;;;;;;AAGA,SAAS,CAAC,gBAAgB,CAAE,kBAAkB,EAAE;AAC9C,kBAAgB,EAAE,CAAE,WAAW,EAAE,YAAY,EAAE,WAAW,CAAE;AAC5D,SAAO,EAAE,CAAC,GAAG,IAAI,GAAG,IAAI;CACzB,CAAC,CAAC;;AAEH,IAAI,YAAY,GAAG,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC;;AAE7C,SAAS,CAAC,eAAe,CAAE,kBAAkB,EAAE,SAAS,CAAC,SAAS,EAAE;AAClE,QAAM,EAAE,YAAY;AACpB,KAAG,EAAE,aAAa;AAClB,WAAS,EAAE,YAAY;;;AAGrB,QAAG,MAAM,CAAC,MAAM,EAAE,EAAC;AACjB,aAAO,IAAI;KACZ,MACG;AACF,aAAO,KAAK;KACb;GACF;AACD,KAAG,EAAE,UAAW,IAAI,EAAG;AACrB,QAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,OAAO,CAAE,IAAI,CAAC,MAAM,CAAE,CAAC;AAC/C,WAAO,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;GACnC;CACF,CAAC,CAAC,sE","file":"/server/_slingshot.js","sourcesContent":["/**\n * Created by avivhatzir on 26/10/2015.\n */\nSlingshot.fileRestrictions( \"uploadToAmazonS3\", {\n  allowedFileTypes: [ \"image/png\", \"image/jpeg\", \"image/gif\" ],\n  maxSize: 1 * 1024 * 1024\n});\n\nlet amazonBucket = Meteor.settings.AWSBucket;\n\nSlingshot.createDirective( \"uploadToAmazonS3\", Slingshot.S3Storage, {\n  bucket: amazonBucket,\n  acl: \"public-read\",\n  authorize: function () {\n    //let userFileCount = Files.find( { \"userId\": this.userId } ).count();\n    //return userFileCount < 3 ? true : false;\n    if(Meteor.userId()){\n      return true\n    }\n    else{\n      return false\n    }\n  },\n  key: function ( file ) {\n    var user = Meteor.users.findOne( this.userId );\n    return user._id + \"/\" + file.name;\n  }\n});\n"]}