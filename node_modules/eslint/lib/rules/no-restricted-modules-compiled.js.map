{"version":3,"sources":["no-restricted-modules.js"],"names":[],"mappings":";;;;AAIA,YAAY,CAAC;;;;;;AAMb,MAAM,CAAC,OAAO,GAAG,UAAS,OAAO,EAAE;;AAE/B,QAAI,iBAAiB,GAAG,OAAO,CAAC,OAAO,CAAC;;;AAGxC,QAAI,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE;AAChC,eAAO,EAAE,CAAC;KACb;;;;;;;AAOD,aAAS,QAAQ,CAAC,IAAI,EAAE;AACpB,eAAO,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,CAAC;KAC5E;;;;;;;AAOD,aAAS,aAAa,CAAC,IAAI,EAAE;AACzB,eAAO,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,YAAY,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,SAAS,CAAC;KAC9E;;;;;;;AAOD,aAAS,uBAAuB,CAAC,IAAI,EAAE;AACnC,YAAI,UAAU,CAAC;;;AAGf,YAAI,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;AACtD,gBAAI,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;;;AAGnD,gBAAI,iBAAiB,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;AACjD,0BAAU,GAAG,aAAa,CAAC;aAC9B;SACJ;;AAED,eAAO,UAAU,CAAC;KACrB;;AAED,WAAO;AACH,wBAAgB,EAAE,wBAAS,IAAI,EAAE;AAC7B,gBAAI,aAAa,CAAC,IAAI,CAAC,EAAE;AACrB,oBAAI,oBAAoB,GAAG,uBAAuB,CAAC,IAAI,CAAC,CAAC;;AAEzD,oBAAI,oBAAoB,EAAE;AACtB,2BAAO,CAAC,MAAM,CAAC,IAAI,EAAE,wDAAwD,EAAE;AAC3E,kCAAU,EAAE,oBAAoB;qBACnC,CAAC,CAAC;iBACN;aACJ;SACJ;KACJ,CAAC;CACL,CAAC;;AAEF,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG;AACpB,UAAM,EAAE,OAAO;AACf,WAAO,EAAE,CACL;AACI,cAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;KACpB,CACJ;AACD,qBAAiB,EAAE;AACf,cAAM,EAAE,QAAQ;KACnB;AACD,iBAAa,EAAE,IAAI;CACtB,CAAC","file":"no-restricted-modules-compiled.js","sourcesContent":["/**\n * @fileoverview Restrict usage of specified node modules.\n * @author Christian Schulz\n */\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\nmodule.exports = function(context) {\n    // trim restricted module names\n    var restrictedModules = context.options;\n\n    // if no modules are restricted we don't need to check the CallExpressions\n    if (restrictedModules.length === 0) {\n        return {};\n    }\n\n    /**\n     * Function to check if a node is a string literal.\n     * @param {ASTNode} node The node to check.\n     * @returns {boolean} If the node is a string literal.\n     */\n    function isString(node) {\n        return node && node.type === \"Literal\" && typeof node.value === \"string\";\n    }\n\n    /**\n     * Function to check if a node is a require call.\n     * @param {ASTNode} node The node to check.\n     * @returns {boolean} If the node is a require call.\n     */\n    function isRequireCall(node) {\n        return node.callee.type === \"Identifier\" && node.callee.name === \"require\";\n    }\n\n    /**\n     * Function to check if a node has an argument that is an restricted module and return its name.\n     * @param {ASTNode} node The node to check\n     * @returns {undefined|String} restricted module name or undefined if node argument isn't restricted.\n     */\n    function getRestrictedModuleName(node) {\n        var moduleName;\n\n        // node has arguments and first argument is string\n        if (node.arguments.length && isString(node.arguments[0])) {\n            var argumentValue = node.arguments[0].value.trim();\n\n            // check if argument value is in restricted modules array\n            if (restrictedModules.indexOf(argumentValue) !== -1) {\n                moduleName = argumentValue;\n            }\n        }\n\n        return moduleName;\n    }\n\n    return {\n        \"CallExpression\": function(node) {\n            if (isRequireCall(node)) {\n                var restrictedModuleName = getRestrictedModuleName(node);\n\n                if (restrictedModuleName) {\n                    context.report(node, \"'{{moduleName}}' module is restricted from being used.\", {\n                        moduleName: restrictedModuleName\n                    });\n                }\n            }\n        }\n    };\n};\n\nmodule.exports.schema = {\n    \"type\": \"array\",\n    \"items\": [\n        {\n            \"enum\": [0, 1, 2]\n        }\n    ],\n    \"additionalItems\": {\n        \"type\": \"string\"\n    },\n    \"uniqueItems\": true\n};\n"]}